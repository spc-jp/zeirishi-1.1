<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¨ç†å£«ã®ãŸã‚ã®AIã²ãªå½¢</title>
    <!-- ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@600;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* ç¨ç†å£«ç‰ˆï¼šæŒ‡å®šã‚«ãƒ©ãƒ¼åæ˜  */
            /* ã‚¿ã‚¤ãƒˆãƒ«ã‚«ãƒ©ãƒ¼: #1E5F4A */
            --primary-color: #1E5F4A;
            /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚åŒç³»è‰²ã§èª¿æ•´ */
            --primary-gradient: linear-gradient(135deg, #1E5F4A 0%, #2A7A61 100%);
            
            /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼: #5FBF7Aï¼ˆ1ç®‡æ‰€ã®ã¿ã¨ã„ã†æŒ‡å®šã«åˆã‚ã›ã€ã‚´ãƒ¼ãƒ«ãƒ‰ç­‰ã‚’å»ƒæ­¢ã—ã¦çµ±ä¸€ï¼‰ */
            --gold-accent: #5FBF7A; 
            --accent-color: #5FBF7A;
            --accent-gradient: linear-gradient(135deg, #5FBF7A 0%, #88D49E 100%);
            
            --bg-color: #F8F9FA;
            --card-bg: #FFFFFF;
            --text-main: #1A1A1A;
            --text-sub: #5F6368;
            --border-color: #E0E0E0;
            --input-bg: #FFFFFF;
            --input-border: #DADCE0;
            --danger-bg: #FEF7E0;
            --danger-text: #B08800;
            --modal-overlay: rgba(30, 95, 74, 0.7);
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-card: 0 8px 24px rgba(0,0,0,0.08);
            --shadow-float: 0 16px 32px rgba(0,0,0,0.12);
            --radius: 16px;
            --radius-sm: 10px;
            --spacing-unit: 20px;
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰è¨­å®š */
        [data-theme="dark"] {
            --primary-color: #5FBF7A; /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰æ™‚ã¯æ˜ã‚‹ã */
            --primary-gradient: linear-gradient(135deg, #4DA869 0%, #5FBF7A 100%);
            --gold-accent: #5FBF7A;
            --bg-color: #121212;
            --card-bg: #1E1E1E;
            --text-main: #E8EAED;
            --text-sub: #9AA0A6;
            --border-color: #3C4043;
            --input-bg: #28292A;
            --input-border: #3C4043;
            --danger-bg: #3C3200;
            --danger-text: #FDD835;
            --shadow-card: 0 8px 24px rgba(0,0,0,0.4);
            --accent-gradient: linear-gradient(135deg, #4DA869 0%, #5FBF7A 100%);
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme="light"]) {
                --primary-color: #5FBF7A;
                --primary-gradient: linear-gradient(135deg, #4DA869 0%, #5FBF7A 100%);
                --gold-accent: #5FBF7A;
                --bg-color: #121212;
                --card-bg: #1E1E1E;
                --text-main: #E8EAED;
                --text-sub: #9AA0A6;
                --border-color: #3C4043;
                --input-bg: #28292A;
                --input-border: #3C4043;
                --danger-bg: #3C3200;
                --danger-text: #FDD835;
                --shadow-card: 0 8px 24px rgba(0,0,0,0.4);
                --accent-gradient: linear-gradient(135deg, #4DA869 0%, #5FBF7A 100%);
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: var(--spacing-unit);
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            padding: 60px 10px 30px;
            text-align: center;
            position: relative;
        }

        h1 {
            font-family: 'Noto Serif JP', serif;
            font-size: 28px;
            font-weight: 900;
            color: var(--primary-color); /* æŒ‡å®šè‰²ã‚’é©ç”¨ */
            letter-spacing: 0.08em;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
            display: inline-block;
        }
        
        h1::after {
            content: '';
            display: block;
            width: 40px;
            height: 3px;
            background: var(--gold-accent);
            margin: 12px auto 0;
            border-radius: 2px;
        }

        [data-theme="dark"] h1 {
            color: #FFFFFF;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        @media (prefers-color-scheme: dark) {
            :root:not([data-theme="light"]) h1 {
                color: #FFFFFF;
                text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            }
        }

        .settings-btn {
            position: absolute;
            right: 16px;
            top: 16px;
            transform: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-sub);
            padding: 8px;
            opacity: 0.6;
            transition: opacity 0.2s, transform 0.2s;
            z-index: 10;
        }
        .settings-btn:hover {
            opacity: 1;
            transform: rotate(30deg);
        }

        .subtitle {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 14px;
            color: var(--text-sub);
            margin-top: 20px;
            margin-bottom: 24px;
            font-weight: 500;
            line-height: 1.8;
            letter-spacing: 0.02em;
        }

        .usage-link {
            display: inline-block;
            font-size: 12px;
            color: var(--text-sub);
            background: transparent;
            border: 1px solid var(--border-color);
            padding: 6px 16px;
            border-radius: 20px;
            text-decoration: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        .usage-link:hover {
            border-color: var(--gold-accent);
            color: var(--text-main);
        }

        /* ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ */
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 24px 16px;
            box-shadow: var(--shadow-card);
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            height: 160px;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--accent-gradient);
            opacity: 0.8;
        }

        .card:active { transform: scale(0.96); box-shadow: var(--shadow-sm); }
        .card:hover {
            border-color: rgba(95, 191, 122, 0.2);
            box-shadow: var(--shadow-float);
        }

        .card-icon {
            font-size: 38px;
            margin-bottom: 16px;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }

        .card-title {
            font-weight: 700;
            font-size: 15px;
            line-height: 1.5;
            color: var(--text-main);
            letter-spacing: 0.02em;
        }

        /* é­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ */
        .magic-section {
            margin-top: 10px;
            margin-bottom: 40px;
        }

        .magic-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 19px;
            font-weight: 900;
            color: var(--text-main);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            letter-spacing: 0.05em;
        }
        
        .magic-title::before {
            content: 'âœ¦';
            color: var(--gold-accent);
            margin-right: 8px;
            font-size: 20px;
        }

        .magic-title span {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 11px;
            font-weight: 500;
            color: var(--text-sub);
            margin-left: 12px;
            background: rgba(0,0,0,0.04);
            padding: 3px 8px;
            border-radius: 4px;
            letter-spacing: 0.05em;
        }

        .tool-group {
            background: var(--card-bg);
            border-radius: var(--radius);
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: box-shadow 0.2s;
        }

        .tool-group:hover {
            box-shadow: var(--shadow-card);
        }

        .tool-summary {
            padding: 18px 20px;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            color: var(--text-main);
            display: flex;
            align-items: center;
            justify-content: space-between;
            list-style: none;
            background: linear-gradient(to right, var(--card-bg), rgba(0,0,0,0.01));
        }
        
        .tool-summary::-webkit-details-marker { display: none; }

        .tool-icon { margin-right: 12px; font-size: 20px; }
        
        .tool-role {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-sub);
            background: var(--input-bg);
            padding: 4px 10px;
            border-radius: 20px;
            margin-left: auto;
            margin-right: 12px;
            letter-spacing: 0.05em;
        }

        .arrow-icon {
            font-size: 12px;
            color: var(--text-sub);
            transition: transform 0.2s;
        }

        details[open] .arrow-icon { transform: rotate(180deg); }

        .prompt-list {
            padding: 0 20px 20px;
            background: var(--card-bg);
            border-top: 1px solid var(--border-color);
        }

        .prompt-item {
            display: flex;
            flex-direction: column;
            padding: 16px 0;
            border-bottom: 1px dashed var(--border-color);
        }

        .prompt-item:last-child { border-bottom: none; padding-bottom: 0; }
        .prompt-item:first-child { padding-top: 20px; }

        .prompt-label {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .prompt-label::before {
            content: 'â—';
            color: var(--accent-color);
            font-size: 8px;
            margin-right: 8px;
        }

        .prompt-content {
            font-size: 13px;
            color: var(--text-sub);
            background: var(--input-bg);
            padding: 14px;
            border-radius: 8px;
            margin-bottom: 10px;
            line-height: 1.7;
            white-space: pre-wrap;
            border: 1px solid transparent;
        }

        .prompt-copy-btn {
            align-self: flex-end;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--accent-color);
            font-size: 12px;
            font-weight: 600;
            padding: 6px 14px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .prompt-copy-btn::before {
            content: "ğŸ“‹";
            font-size: 12px;
            margin-right: 4px;
        }

        .prompt-copy-btn:hover {
            background: var(--accent-color);
            color: #fff;
            border-color: var(--accent-color);
        }

        /* ã‚·ãƒ¼ãƒ³ç”»é¢ */
        .scene-view {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .nav-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            position: relative;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--text-sub);
            font-size: 15px;
            font-weight: 700;
            padding: 8px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: color 0.2s;
        }
        .back-btn:hover { color: var(--text-main); }
        .back-btn::before {
            content: "â€¹";
            font-size: 28px;
            margin-right: 4px;
            margin-top: -4px;
        }

        .scene-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Noto Serif JP', serif;
            font-weight: 900;
            font-size: 18px;
            color: var(--text-main);
            letter-spacing: 0.05em;
        }

        .form-group { margin-bottom: 24px; position: relative; }

        label {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: var(--text-sub);
            margin-bottom: 10px;
            letter-spacing: 0.02em;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 16px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--input-border);
            background: var(--input-bg);
            color: var(--text-main);
            font-size: 16px;
            font-family: inherit;
            resize: none;
            outline: none;
            appearance: none;
            transition: border-color 0.2s, box-shadow 0.2s;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
            line-height: 1.8;
        }

        textarea::placeholder { color: #AAA; font-size: 14px; line-height: 1.7; }
        textarea:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(95, 191, 122, 0.2);
            background: var(--card-bg);
        }

        .char-counter {
            position: absolute;
            bottom: -22px;
            right: 4px;
            font-size: 11px;
            color: var(--text-sub);
            opacity: 0.8;
            font-family: 'Noto Sans JP', sans-serif;
        }

        select {
            width: 100%;
            padding: 14px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--input-border);
            background: var(--card-bg);
            color: var(--text-main);
            font-size: 16px;
            font-family: inherit;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%235c6c7b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }

        .warning-box {
            background-color: var(--danger-bg);
            color: var(--danger-text);
            padding: 16px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            display: none;
            animation: fadeIn 0.3s ease;
            border-left: 4px solid var(--danger-text);
        }
        .warning-icon { margin-right: 12px; font-size: 18px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 16px;
            border-radius: 50px;
            border: none;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 16px;
            letter-spacing: 0.05em;
        }
        .btn:active { transform: scale(0.98); }

        .btn-primary {
            background: var(--primary-gradient);
            color: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .btn-primary:hover { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25); filter: brightness(1.1); }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--text-main);
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .btn-secondary:hover { background: var(--bg-color); }
        
        .btn-clear {
            background: none;
            border: none;
            color: var(--text-sub);
            font-size: 13px;
            box-shadow: none;
            padding: 8px;
            margin-top: 4px;
            text-decoration: none;
            opacity: 0.7;
        }
        .btn-clear:hover { opacity: 1; }

        .result-area {
            margin-top: 32px;
            display: none;
            border-top: 1px solid var(--border-color);
            padding-top: 32px;
        }

        .result-box {
            background: var(--input-bg);
            padding: 24px;
            border-radius: var(--radius-sm);
            font-size: 14px;
            margin-bottom: 24px;
            white-space: pre-wrap;
            border: 1px solid var(--border-color);
            max-height: 400px;
            overflow-y: auto;
            line-height: 1.8;
            color: var(--text-main);
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.03);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--modal-overlay);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 200;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.2s;
            backdrop-filter: blur(8px);
        }
        .modal-overlay.open { display: flex; opacity: 1; }

        .modal-content {
            background: var(--card-bg);
            width: 100%;
            max-width: 500px;
            border-radius: var(--radius);
            padding: 32px 28px;
            position: relative;
            box-shadow: var(--shadow-float);
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 28px;
            background: none;
            border: none;
            color: var(--text-sub);
            cursor: pointer;
            padding: 4px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }
        .modal-close:hover { background: var(--bg-color); }

        .modal-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 20px;
            font-weight: 900;
            margin-bottom: 24px;
            color: var(--text-main);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 12px;
            letter-spacing: 0.05em;
        }

        .modal-section { margin-bottom: 32px; }

        .modal-h3 {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-main);
            display: flex;
            align-items: center;
            letter-spacing: 0.05em;
        }
        .modal-h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 16px;
            background: var(--gold-accent);
            margin-right: 10px;
            border-radius: 2px;
        }

        .modal-text {
            font-size: 14px;
            color: var(--text-main);
            margin-bottom: 8px;
            line-height: 1.8;
        }

        .modal-list {
            padding-left: 0;
            list-style: none;
            font-size: 14px;
            color: var(--text-main);
            margin-bottom: 8px;
        }
        .modal-list li {
            margin-bottom: 12px;
            position: relative;
            padding-left: 20px;
            line-height: 1.8;
        }
        .modal-list li::before {
            content: "âœ”";
            color: var(--gold-accent);
            position: absolute;
            left: 0;
            top: 0;
            font-size: 12px;
        }

        .settings-row { margin-bottom: 24px; }

        .theme-select {
            width: 100%;
            padding: 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            background: var(--input-bg);
            color: var(--text-main);
            font-size: 16px;
        }

        .settings-textarea {
            width: 100%;
            height: 80px;
            padding: 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            background: var(--input-bg);
            color: var(--text-main);
            font-size: 14px;
            resize: none;
            margin-bottom: 4px;
            line-height: 1.6;
        }
        .settings-textarea:focus {
            border-color: var(--accent-color);
            outline: none;
        }
        .settings-note {
            font-size: 12px;
            color: var(--text-sub);
            margin-top: 6px;
            line-height: 1.5;
        }

        .demo-area {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px dashed var(--border-color);
            text-align: center;
        }
        
        .demo-label {
            font-size: 12px;
            color: var(--text-sub);
            opacity: 0.8;
            margin-bottom: 12px;
            display: block;
            font-weight: 500;
        }

        .btn-demo {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-sub);
            font-size: 12px;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            margin: 0 4px;
            transition: all 0.2s;
        }
        .btn-demo:hover {
            background: var(--bg-color);
            border-color: var(--text-sub);
            color: var(--text-main);
        }

        /* ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background: rgba(15, 39, 32, 0.98);
            color: #fff;
            text-align: center;
            border-radius: 50px;
            padding: 14px 24px;
            position: fixed;
            z-index: 300;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%) translateY(10px);
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            letter-spacing: 0.05em;
        }
        #toast.show {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            bottom: 50px;
        }
    </style>
</head>
<body>

    <!-- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ -->
    <div id="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ</div>

    <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
    <div id="home-view" class="container">
        <header>
            <button class="settings-btn" onclick="app.openSettings()">âš™ï¸</button>
            <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ  -->
            <h1><span style="font-size: 0.9em; margin-right: 4px; vertical-align: baseline;">ğŸ“Š</span>ç¨ç†å£«ã®ãŸã‚ã®AIã²ãªå½¢</h1>
            <!-- ã‚­ãƒ£ãƒƒãƒã‚³ãƒ”ãƒ¼å¤‰æ›´ -->
            <div class="subtitle">
                æ•°å­—ã®å‰ã«ã€è€ƒãˆã‚’æ•´ãˆã‚‹ã€‚<br>
                åˆ¤æ–­ã¯å…ˆç”ŸãŒã€<br>
                æ•´ç†ã¯AIãŒã€‚
            </div>
            <div onclick="app.openUsage()" class="usage-link">ä½¿ã„æ–¹ã‚’è¦‹ã‚‹</div>
        </header>

        <div class="grid">
            <div class="card" onclick="app.openScene('A')">
                <div class="card-icon">ğŸ“</div>
                <div class="card-title">ç›¸è«‡ãƒ¡ãƒ¢<br>æ•´ç†</div>
            </div>
            <div class="card" onclick="app.openScene('B')">
                <div class="card-icon">ğŸ’¡</div>
                <div class="card-title">ç¨å‹™å›ç­”ãƒ»æ„è¦‹<br>æ§‹æˆæ¡ˆ</div>
            </div>
            <div class="card" onclick="app.openScene('C')">
                <div class="card-icon">ğŸ—£ï¸</div>
                <div class="card-title">åˆ¶åº¦ãƒ»ç”¨èª<br>ã‚„ã•ã—ãè§£èª¬</div>
            </div>
            <div class="card" onclick="app.openScene('D')">
                <div class="card-icon">ğŸ”’</div>
                <div class="card-title">åŒ¿ååŒ–<br>ãƒã‚¹ã‚­ãƒ³ã‚°</div>
            </div>
        </div>

        <!-- é­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="magic-section">
            <div class="magic-title">AIåˆ¥ é­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ <span>Copy & Paste</span></div>

            <!-- ChatGPT (ç§˜æ›¸) -->
            <details class="tool-group">
                <summary class="tool-summary">
                    <div style="display:flex; align-items:center;">
                        <span class="tool-icon">ğŸ¤–</span>
                        <span>ChatGPT</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="tool-role">ç§˜æ›¸ãƒ»äº‹å‹™å½¹</span>
                        <span class="arrow-icon">â–¼</span>
                    </div>
                </summary>
                <div class="prompt-list">
                    <div class="prompt-item">
                        <div class="prompt-label">è„±ç¨ã¾ãŒã„ã®ç›¸è«‡ã‚’æ–­ã‚‹ãƒ¡ãƒ¼ãƒ«</div>
                        <div class="prompt-content">é¡§å•å…ˆã‹ã‚‰ã®ã€Œå£²ä¸Šã‚’æ¥æœŸã«å›ã—ãŸã„ã€ã€Œå€‹äººçš„ãªæ”¯å‡ºã‚’çµŒè²»ã«ã—ãŸã„ã€ã¨ã„ã†è¦æœ›ã«å¯¾ã—ã€ç¨ç†å£«ã¨ã—ã¦ã®ç«‹å ´ã‚’å®ˆã‚Šã¤ã¤ã€è§’ã‚’ç«‹ã¦ãšã«ãã£ã±ã‚Šã¨æ–­ã‚‹ãƒ¡ãƒ¼ãƒ«æ–‡é¢ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è³‡æ–™æå‡ºã®å‚¬ä¿ƒï¼ˆç¢ºå®šç”³å‘Šï¼‰</div>
                        <div class="prompt-content">ç¢ºå®šç”³å‘ŠæœŸé™ãŒè¿«ã£ã¦ã„ã¾ã™ãŒã€è³‡æ–™ã‚’æå‡ºã—ã¦ãã‚Œãªã„å€‹äººäº‹æ¥­ä¸»ã«å¯¾ã—ã€å±æ©Ÿæ„Ÿï¼ˆãƒšãƒŠãƒ«ãƒ†ã‚£ã®ãƒªã‚¹ã‚¯ç­‰ï¼‰ã‚’ä¼ãˆã¤ã¤ã€è‡³æ€¥ã®æå‡ºã‚’ä¿ƒã™ä¸å¯§ãªé€£çµ¡æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è³‡é‡‘ç¹°ã‚Šæ”¹å–„ã®ä¸€èˆ¬è«–æç¤º</div>
                        <div class="prompt-content">å£²ä¸ŠãŒæ¸›å°‘å‚¾å‘ã«ã‚ã‚‹ä¸­å°ä¼æ¥­ç¤¾é•·ã«å¯¾ã—ã€è³‡é‡‘ç¹°ã‚Šæ”¹å–„ã®ãŸã‚ã®ä¸€èˆ¬çš„ãªæ‰‹æ³•ï¼ˆã‚³ã‚¹ãƒˆå‰Šæ¸›ã€è³‡ç”£å£²å´ã€ãƒªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç­‰ï¼‰ã‚’5ã¤æŒ™ã’ã€ãã‚Œãã‚Œã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚’ç°¡æ˜“ã«è§£èª¬ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è‹±æ–‡è²¡å‹™è«¸è¡¨ã®é …ç›®ç¿»è¨³</div>
                        <div class="prompt-content">ä»¥ä¸‹ã®æ—¥æœ¬ã®å‹˜å®šç§‘ç›®ãƒªã‚¹ãƒˆã‚’ã€å›½éš›çš„ãªä¼šè¨ˆåŸºæº–ï¼ˆIFRS/US GAAPï¼‰ã§ä¸€èˆ¬çš„ã«ä½¿ã‚ã‚Œã‚‹è‹±èªã®ç§‘ç›®ã«ç¿»è¨³ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                </div>
            </details>

            <!-- Gemini (èª¿æŸ»å“¡) -->
            <details class="tool-group">
                <summary class="tool-summary">
                    <div style="display:flex; align-items:center;">
                        <span class="tool-icon">ğŸ’</span>
                        <span>Gemini</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="tool-role">èª¿æŸ»ãƒ»åˆ†æå½¹</span>
                        <span class="arrow-icon">â–¼</span>
                    </div>
                </summary>
                <div class="prompt-list">
                    <div class="prompt-item">
                        <div class="prompt-label">ç¨åˆ¶æ”¹æ­£ã®ãƒã‚¤ãƒ³ãƒˆæŠ½å‡º</div>
                        <div class="prompt-content">ä»¤å’Œâ—‹å¹´åº¦ç¨åˆ¶æ”¹æ­£å¤§ç¶±ã®ã†ã¡ã€ä¸­å°ä¼æ¥­çµŒå–¶ã«ç›´æ¥å½±éŸ¿ã™ã‚‹é …ç›®ï¼ˆè³ƒä¸Šã’ç¨åˆ¶ã€äº¤éš›è²»ã€å°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ãªã©ï¼‰ã‚’ãƒ”ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã—ã€å®Ÿå‹™ä¸Šã®å¤‰æ›´ç‚¹ã‚’ç®‡æ¡æ›¸ãã§ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">æ¥­ç•Œã®å¹³å‡åˆ©ç›Šç‡èª¿æŸ»</div>
                        <div class="prompt-content">ã€Œâ—‹â—‹æ¥­ï¼ˆä¾‹ï¼šç¾å®¹å®¤ã€ITã‚³ãƒ³ã‚µãƒ«ï¼‰ã€ã®å¹³å‡çš„ãªç²—åˆ©ç›Šç‡ã€å–¶æ¥­åˆ©ç›Šç‡ã€åŠ´åƒåˆ†é…ç‡ã®ç›®å®‰ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚ã¾ãŸã€æœ€è¿‘ã®æ¥­ç•Œãƒˆãƒ¬ãƒ³ãƒ‰ã‚‚è£œè¶³ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">é€šé”ãƒ»è£æ±ºã®æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰æ¡ˆ</div>
                        <div class="prompt-content">ã€Œâ—‹â—‹ï¼ˆä¾‹ï¼šå½¹å“¡é€€è·é‡‘ã®éå¤§åˆ¤å®šï¼‰ã€ã«é–¢ã™ã‚‹å›½ç¨ä¸æœå¯©åˆ¤æ‰€ã®è£æ±ºäº‹ä¾‹ã‚„é€šé”ã‚’æ¤œç´¢ã—ãŸã„ã§ã™ã€‚åŠ¹æœçš„ãªæ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®çµ„ã¿åˆã‚ã›ã‚’10ãƒ‘ã‚¿ãƒ¼ãƒ³æŒ™ã’ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è£œåŠ©é‡‘ãƒ»åŠ©æˆé‡‘ã®èª¿æŸ»</div>
                        <div class="prompt-content">ç¾åœ¨å…¬å‹Ÿã•ã‚Œã¦ã„ã‚‹ã€ä¸­å°ä¼æ¥­ã®è¨­å‚™æŠ•è³‡ã‚„ITåŒ–ã‚’æ”¯æ´ã™ã‚‹ä¸»è¦ãªè£œåŠ©é‡‘ãƒ»åŠ©æˆé‡‘ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã€å¯¾è±¡è¦ä»¶ã¨è£œåŠ©é¡ã®ä¸Šé™ã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                </div>
            </details>

            <!-- NotebookLM (åˆ†æå®˜) -->
            <details class="tool-group">
                <summary class="tool-summary">
                    <div style="display:flex; align-items:center;">
                        <span class="tool-icon">ğŸ“Š</span>
                        <span>NotebookLM</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="tool-role">åˆ†æãƒ»èª­è¾¼å½¹</span>
                        <span class="arrow-icon">â–¼</span>
                    </div>
                </summary>
                <div class="prompt-list">
                    <div class="prompt-item">
                        <div class="prompt-label">æ±ºç®—æ›¸ã®ç•°å¸¸ç‚¹æ¤œçŸ¥</div>
                        <div class="prompt-content">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè©¦ç®—è¡¨ï¼ˆã¾ãŸã¯ç·å‹˜å®šå…ƒå¸³ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«ã€å‰æœŸã¨æ¯”è¼ƒã—ã¦è‘—ã—ãå¤‰å‹•ã—ã¦ã„ã‚‹ç§‘ç›®ã‚„ã€ç•°å¸¸å€¤ã¨æ€ã‚ã‚Œã‚‹ç®‡æ‰€ã‚’æŒ‡æ‘˜ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">çµŒå–¶åˆ†æãƒ¬ãƒãƒ¼ãƒˆã®ä½œæˆ</div>
                        <div class="prompt-content">è²¡å‹™è«¸è¡¨ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãã€åç›Šæ€§ãƒ»å®‰å…¨æ€§ãƒ»ç”Ÿç”£æ€§ã®è¦³ç‚¹ã‹ã‚‰ã“ã®ä¼šç¤¾ã®å¼·ã¿ã¨å¼±ã¿ã‚’åˆ†æã—ã€çµŒå–¶è€…å‘ã‘ã®ç°¡æ˜“ãƒ¬ãƒãƒ¼ãƒˆï¼ˆ400å­—ç¨‹åº¦ï¼‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è­°äº‹éŒ²ã‹ã‚‰ã®ã‚¿ã‚¹ã‚¯æŠ½å‡º</div>
                        <div class="prompt-content">æ ªä¸»ç·ä¼šï¼ˆã¾ãŸã¯å–ç· å½¹ä¼šï¼‰ã®è­°äº‹éŒ²ã‚’èª­ã¿è¾¼ã¿ã€æ±ºè­°äº‹é …ã€ä»Šå¾Œå¿…è¦ãªç™»è¨˜æ‰‹ç¶šãã€ãŠã‚ˆã³ç¨å‹™ç½²ã¸ã®å±Šå‡ºäº‹é …ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">å¥‘ç´„æ›¸ã®å°ç´™ç¨ãƒã‚§ãƒƒã‚¯</div>
                        <div class="prompt-content">ã“ã®å¥‘ç´„æ›¸ã®å†…å®¹ã«åŸºã¥ãã€å°ç´™ç¨æ³•ä¸Šã®èª²ç¨æ–‡æ›¸ã«è©²å½“ã™ã‚‹ã‹ã©ã†ã‹ã€è©²å½“ã™ã‚‹å ´åˆã¯ä½•å·æ–‡æ›¸ã§å°ç´™é¡ã¯ã„ãã‚‰ã«ãªã‚‹ã‹ã€åˆ¤æ–­ã®æ ¹æ‹ ã¨ã¨ã‚‚ã«ç¤ºã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                </div>
            </details>
        </div>
    </div>

    <!-- ã‚·ãƒ¼ãƒ³ç”»é¢ -->
    <div id="scene-view" class="container scene-view">
        <div class="nav-header">
            <button class="back-btn" onclick="app.goHome()">æˆ»ã‚‹</button>
            <div class="scene-title" id="scene-title-text">ã‚·ãƒ¼ãƒ³å</div>
            <button class="settings-btn" onclick="app.openSettings()">âš™ï¸</button>
        </div>

        <div class="form-group">
            <label>å…¥åŠ›æ¬„ï¼ˆãƒ¡ãƒ¢ã‚„è³‡æ–™ã‚’è²¼ã‚Šä»˜ã‘ï¼‰</label>
            <textarea id="user-input" placeholder="" oninput="app.checkInput()" spellcheck="false"></textarea>
            <div id="char-count" class="char-counter">0æ–‡å­—</div>
        </div>

        <div id="warning-box" class="warning-box">
            <span class="warning-icon">âš ï¸</span>
            <div id="warning-msg"></div>
        </div>

        <div class="form-group" id="option-container">
            <div id="opt-B" class="opt-group" style="display:none;">
                <label>å‡ºåŠ›å½¢å¼</label>
                <select id="select-B">
                    <option value="æ‰€å†…ãƒ¡ãƒ¢">æ‰€å†…æ¤œè¨ç”¨ãƒ¡ãƒ¢ï¼ˆçµè«–ã¨ãƒªã‚¹ã‚¯é‡è¦–ï¼‰</option>
                    <option value="ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå›ç­”">ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå›ç­”æ¡ˆï¼ˆä¸å¯§ãƒ»å¹³æ˜“ï¼‰</option>
                </select>
            </div>
            <div id="opt-C" class="opt-group" style="display:none;">
                <label>èª¬æ˜ã®æ·±ã•</label>
                <select id="select-C">
                    <option value="ä¸€è¨€ã§">ä¸€è¨€ã§ï¼ˆç¤¾é•·ã¸ã®ãƒãƒ£ãƒƒãƒˆè¿”ä¿¡ç”¨ï¼‰</option>
                    <option value="æ¨™æº–" selected>æ¨™æº–ï¼ˆãƒ¡ãƒ¼ãƒ«ãƒ»å£é ­èª¬æ˜ç”¨ï¼‰</option>
                    <option value="è©³ç´°">è©³ç´°ï¼ˆå…·ä½“ä¾‹ãƒ»è¨ˆç®—ä¾‹ã‚ã‚Šï¼‰</option>
                </select>
            </div>
            <div id="opt-D" class="opt-group" style="display:none;">
                <label>åŒ¿ååŒ–ãƒ¬ãƒ™ãƒ«</label>
                <select id="select-D">
                    <option value="ä½">ä½ï¼ˆå€‹äººåãƒ»ç¤¾åã®ã¿ãƒã‚¹ã‚­ãƒ³ã‚°ï¼‰</option>
                    <option value="ä¸­" selected>ä¸­ï¼ˆåœ°åãƒ»æ—¥æ™‚ãƒ»é‡‘é¡ã‚‚æ¦‚æ•°ã«ï¼‰</option>
                    <option value="é«˜">é«˜ï¼ˆç‰¹å®šã•ã‚Œã†ã‚‹æ¥­ç¨®ãƒ»å–å¼•å…ˆã‚‚ã¼ã‹ã™ï¼‰</option>
                </select>
            </div>
        </div>

        <button class="btn btn-primary" onclick="app.generate()">ç”Ÿæˆã™ã‚‹</button>

        <div id="result-area" class="result-area">
            <label>ç”Ÿæˆçµæœï¼ˆAIã¸ã®æŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰</label>
            <div class="result-box" id="result-text"></div>
            <button id="copy-btn" class="btn btn-secondary" onclick="app.copyResult()">ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
            <button class="btn btn-clear" onclick="app.clearInput()">å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢</button>
        </div>
    </div>

    <!-- ä½¿ã„æ–¹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="usage-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="app.closeModal('usage-modal')">Ã—</button>
            <div class="modal-title">ä½¿ã„æ–¹ãƒ»ç›®çš„</div>
            <div class="modal-section">
                <div class="modal-h3">ã‚¢ãƒ—ãƒªã®ç›®çš„</div>
                <p class="modal-text">ç¨ç†å£«ãƒ»ä¼šè¨ˆäº‹å‹™æ‰€æ¥­å‹™ã«ãŠã‘ã‚‹ã€ŒAIã¸ã®æŒ‡ç¤ºå‡ºã—ã€ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ãŸã‚ã®æ”¯æ´ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>æ€è€ƒã‚’å¦¨ã’ã‚‹ã“ã¨ãªãã€ç¨å‹™å®Ÿå‹™ã«å³ã—ãŸç²¾åº¦ã®é«˜ã„æŒ‡ç¤ºæ–‡ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã‚’ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§ä½œæˆã§ãã¾ã™ã€‚</p>
            </div>
            <div class="modal-section">
                <div class="modal-h3">åˆ©ç”¨æ‰‹é †</div>
                <ul class="modal-list">
                    <li><strong>1. ã‚·ãƒ¼ãƒ³é¸æŠ</strong><br>ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰ã€ç›¸è«‡æ•´ç†ã‚„å›ç­”ä½œæˆãªã©ã€ç›®çš„ã«åˆã£ãŸã‚«ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</li>
                    <li><strong>2. æƒ…å ±å…¥åŠ›</strong><br>å…¥åŠ›æ¬„ã«ã€æ‰‹å…ƒã®ãƒ¡ãƒ¢ã€æ¡æ–‡ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®è³ªå•ãƒ¡ãƒ¼ãƒ«ãªã©ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚</li>
                    <li><strong>3. ç”Ÿæˆå®Ÿè¡Œ</strong><br>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã€Œç”Ÿæˆã™ã‚‹ã€ã‚’æŠ¼ã™ã¨ã€AIã«ãã®ã¾ã¾æŠ•ã’ã‚‰ã‚Œã‚‹æŒ‡ç¤ºæ–‡ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</li>
                    <li><strong>4. æ´»ç”¨</strong><br>ãƒ›ãƒ¼ãƒ ä¸‹éƒ¨ã®ã€Œé­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã¯ã€ç¨å‹™èª¿æŸ»å¯¾å¿œã‚„ãƒ¡ãƒ¼ãƒ«è¿”ä¿¡ãªã©ã®å®šå‹æ–‡é›†ã§ã™ã€‚</li>
                </ul>
            </div>
            <div class="modal-section">
                <div class="modal-h3">æ³¨æ„äº‹é …</div>
                <p class="modal-text">ãƒ»å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã¯ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œãšã€ãŠä½¿ã„ã®ç«¯æœ«å†…ã§ã®ã¿å‡¦ç†ã•ã‚Œã¾ã™ã€‚<br>ãƒ»ç”Ÿæˆã•ã‚ŒãŸå›ç­”ã‚„è¨ˆç®—çµæœã¯ã€å¿…ãšç¨ç†å£«ã¨ã—ã¦ã®å°‚é–€çš„çŸ¥è¦‹ã«åŸºã¥ãæœ€çµ‚ç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚<br>ãƒ»ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚„å…·ä½“çš„ãªå£åº§æƒ…å ±ãªã©ã®æ©Ÿå¯†æƒ…å ±ã¯ã€å…¥åŠ›å‰ã«ã‚ã‚‹ç¨‹åº¦ä¼ã›ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
            </div>
        </div>
    </div>

    <!-- è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="app.closeModal('settings-modal')">Ã—</button>
            <div class="modal-title">è¨­å®š</div>
            
            <div class="settings-row">
                <label>è‰²åˆã„ï¼ˆãƒ†ãƒ¼ãƒï¼‰</label>
                <select id="theme-select" class="theme-select" onchange="app.changeTheme(this.value)">
                    <option value="auto">ç«¯æœ«ã®è¨­å®šã«åˆã‚ã›ã‚‹</option>
                    <option value="light">ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰</option>
                    <option value="dark">ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</option>
                </select>
            </div>
            
            <div class="settings-row">
                <label>NGãƒ¯ãƒ¼ãƒ‰è¨­å®šï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰</label>
                <textarea id="ng-words-input" class="settings-textarea" placeholder="ä¾‹ï¼šãƒã‚¤ãƒŠãƒ³ãƒãƒ¼, Aç¤¾, å…·ä½“çš„ãªå£²ä¸Šé¡, æ¥µç§˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ" onchange="app.saveNgWords()"></textarea>
                <p class="settings-note">â€»æŒ‡å®šã—ãŸå˜èªãŒå«ã¾ã‚Œã‚‹ã¨å…¥åŠ›ç”»é¢ã§è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šå¯ï¼‰ã€‚</p>
            </div>

            <div class="demo-area">
                <span class="demo-label">ãƒ‡ãƒ¢ãƒ»å‹•ä½œç¢ºèªç”¨</span>
                <button class="btn-demo" onclick="app.loadDemoData()">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿å…¥åŠ›</button>
                <button class="btn-demo" onclick="app.clearDemoData()">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢</button>
            </div>
        </div>
    </div>

    <script>
        const app = {
            currentScene: null,
            ngWords: [],

            scenes: {
                'A': { 
                    title: 'ç›¸è«‡ãƒ¡ãƒ¢æ•´ç†', 
                    hasOpt: false,
                    placeholder: "ï¼ˆä¾‹ï¼‰\næ—¥æ™‚ï¼šä»¤å’Œ6å¹´2æœˆ15æ—¥\nç›¸æ‰‹ï¼šBç¤¾ ç¤¾é•·\nå†…å®¹ï¼š\nãƒ»å½¹å“¡å ±é…¬ã‚’æ¥æœŸã‹ã‚‰æœˆé¡50ä¸‡â†’80ä¸‡ã«ä¸Šã’ãŸã„ã¨è¨€ã£ã¦ã„ã‚‹ã€‚\nãƒ»ç†ç”±ã¯ä½å®…ãƒ­ãƒ¼ãƒ³ã®å¯©æŸ»ã®ãŸã‚ã‚‰ã—ã„ã€‚\nãƒ»ä»ŠæœŸã®åˆ©ç›Šç€åœ°è¦‹è¾¼ã¿ã¯ãƒˆãƒ³ãƒˆãƒ³ãã‚‰ã„ã€‚\nãƒ»ç¤¾ä¼šä¿é™ºæ–™ã®è² æ‹…å¢—ã‚’æ°—ã«ã—ã¦ã„ã‚‹ã€‚\nãƒ»å®šæœŸåŒé¡çµ¦ä¸ã®æ”¹å®šæ™‚æœŸï¼ˆæ±ºç®—å¾Œ3ãƒ¶æœˆä»¥å†…ï¼‰ã«ã¤ã„ã¦ã¯èª¬æ˜æ¸ˆã¿ã ãŒã€å¿˜ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã€‚\n..." 
                },
                'B': { 
                    title: 'ç¨å‹™å›ç­”ãƒ»æ„è¦‹æ§‹æˆ', 
                    hasOpt: true, 
                    optId: 'opt-B',
                    placeholder: "ï¼ˆä¾‹ï¼‰\nã€è³ªå•å†…å®¹ã€‘\nå½“ç¤¾ï¼ˆ3æœˆæ±ºç®—ï¼‰ã¯ã€3æœˆ25æ—¥ã«å¾“æ¥­å“¡å…¨å“¡ã«æ±ºç®—è³ä¸ã‚’æ”¯çµ¦ã™ã‚‹æ—¨ã‚’é€šçŸ¥ã—ã€å®Ÿéš›ã®æ”¯æ‰•ã„ã¯4æœˆ10æ—¥ã«è¡Œã†äºˆå®šã§ã™ã€‚\nã“ã®è³ä¸ã‚’å½“æœŸï¼ˆ3æœˆæœŸï¼‰ã®æé‡‘ã«ç®—å…¥ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã—ã‚‡ã†ã‹ï¼Ÿ\n\nã€å‰æäº‹å®Ÿã€‘\nãƒ»é€šçŸ¥ã¯ãƒ¡ãƒ¼ãƒ«ã§è¡Œã„ã€å…¨å¾“æ¥­å“¡ãŒé–²è¦§å¯èƒ½ã€‚\nãƒ»æ”¯çµ¦é¡ã¯é€šçŸ¥æ™‚ç‚¹ã§ç¢ºå®šã—ã¦ã„ã‚‹ã€‚\nãƒ»å°±æ¥­è¦å‰‡ã«è¦å®šã‚ã‚Šã€‚" 
                },
                'C': { 
                    title: 'åˆ¶åº¦ãƒ»ç”¨èªè§£èª¬', 
                    hasOpt: true, 
                    optId: 'opt-C',
                    placeholder: "ï¼ˆä¾‹ï¼‰\nã€è§£èª¬ã—ãŸã„åˆ¶åº¦ã€‘\nå°‘é¡æ¸›ä¾¡å„Ÿå´è³‡ç”£ã®ç‰¹ä¾‹ï¼ˆ30ä¸‡å††æœªæº€ã®ã‚‚ã®ï¼‰ã€‚\n\nã€ç›¸æ‰‹ã®çŠ¶æ³ã€‘\né’è‰²ç”³å‘Šã‚’ã—ã¦ã„ã‚‹å€‹äººäº‹æ¥­ä¸»ï¼ˆãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ï¼‰ã€‚\nå¹´æœ«ã«æ–°ã—ã„MacBook Proï¼ˆ28ä¸‡å††ï¼‰ã‚’è²·ãŠã†ã‹è¿·ã£ã¦ã„ã‚‹ã€‚\nã€Œä¸€æ‹¬ã§çµŒè²»ã«ãªã‚‹ã®ï¼Ÿã€ã¨èã‹ã‚Œã¦ã„ã‚‹ã€‚" 
                },
                'D': { 
                    title: 'åŒ¿ååŒ–ãƒ»ãƒã‚¹ã‚­ãƒ³ã‚°', 
                    hasOpt: true, 
                    optId: 'opt-D',
                    placeholder: "ï¼ˆä¾‹ï¼‰\næ ªå¼ä¼šç¤¾æ±äº¬å•†äº‹ï¼ˆæ¸‹è°·åŒºå®‡ç”°å·ç”º1-1ã€ä»£è¡¨å–ç· å½¹ ä½è—¤ä¸€éƒï¼‰ã¯ã€ä»¤å’Œ5å¹´åº¦ã®ç¨å‹™èª¿æŸ»ã«ãŠã„ã¦ã€å¤–æ³¨è²»1,500ä¸‡å††ã®å¦èªã‚’æŒ‡æ‘˜ã•ã‚ŒãŸã€‚\nèª¿æŸ»å®˜ã®ç”°ä¸­æ°ã«ã‚ˆã‚‹ã¨ã€å®Ÿæ…‹ã®ãªã„ãƒšãƒ¼ãƒ‘ãƒ¼ã‚«ãƒ³ãƒ‘ãƒ‹ãƒ¼ã¸ã®æ”¯æ‰•ã„ãŒç–‘ã‚ã‚Œã‚‹ã¨ã®ã“ã¨ã€‚" 
                }
            },

            init: function() {
                const savedTheme = localStorage.getItem('tax_app_theme') || 'auto';
                document.getElementById('theme-select').value = savedTheme;
                this.changeTheme(savedTheme);
                
                const savedNgWords = localStorage.getItem('tax_app_ng_words') || '';
                document.getElementById('ng-words-input').value = savedNgWords;
                this.updateNgWordsList(savedNgWords);
            },
            
            saveNgWords: function() {
                const input = document.getElementById('ng-words-input').value;
                localStorage.setItem('tax_app_ng_words', input);
                this.updateNgWordsList(input);
                this.checkInput();
                this.showToast('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            },
            
            updateNgWordsList: function(text) {
                this.ngWords = text.split(/,|ã€/).map(w => w.trim()).filter(w => w.length > 0);
            },

            openScene: function(sceneId) {
                this.currentScene = sceneId;
                const scene = this.scenes[sceneId];
                document.getElementById('scene-title-text').innerText = scene.title;
                document.getElementById('user-input').placeholder = scene.placeholder;
                document.getElementById('home-view').style.display = 'none';
                document.getElementById('scene-view').style.display = 'flex';
                this.clearInput();
                document.querySelectorAll('.opt-group').forEach(el => el.style.display = 'none');
                if (scene.hasOpt) {
                    document.getElementById(scene.optId).style.display = 'block';
                }
                window.scrollTo(0, 0);
            },

            goHome: function() {
                document.getElementById('scene-view').style.display = 'none';
                document.getElementById('home-view').style.display = 'flex';
                this.currentScene = null;
            },

            openUsage: function() { document.getElementById('usage-modal').classList.add('open'); },
            openSettings: function() { document.getElementById('settings-modal').classList.add('open'); },
            closeModal: function(id) { document.getElementById(id).classList.remove('open'); },

            changeTheme: function(theme) {
                localStorage.setItem('tax_app_theme', theme);
                const root = document.documentElement;
                if (theme === 'auto') root.removeAttribute('data-theme');
                else root.setAttribute('data-theme', theme);
            },

            loadDemoData: function() {
                let targetScene = this.currentScene;
                if (!targetScene) {
                    this.openScene('A');
                    targetScene = 'A';
                    this.closeModal('settings-modal');
                } else {
                    this.closeModal('settings-modal');
                }
                const demoText = this.scenes[targetScene].placeholder.replace('ï¼ˆä¾‹ï¼‰\n', '');
                const input = document.getElementById('user-input');
                input.value = demoText;
                this.checkInput();
                this.showToast('ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¾ã—ãŸ');
            },

            clearDemoData: function() {
                this.clearInput();
                this.closeModal('settings-modal');
                this.showToast('å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
            },

            checkInput: function() {
                const text = document.getElementById('user-input').value;
                const warningBox = document.getElementById('warning-box');
                const warningMsg = document.getElementById('warning-msg');
                
                const count = text.length;
                document.getElementById('char-count').innerText = `${count}æ–‡å­—`;
                
                // ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼çš„ãªæ•°å­—åˆ—ãƒã‚§ãƒƒã‚¯
                const myNumberRegex = /\d{12}|\d{4}-\d{4}-\d{4}/;
                const hasMyNum = myNumberRegex.test(text);
                
                const hitNgWords = this.ngWords.filter(word => text.includes(word));
                const hasNg = hitNgWords.length > 0;

                if (hasMyNum || hasNg) {
                    warningBox.style.display = 'flex';
                    let msgHTML = '';
                    
                    if (hasNg) {
                         msgHTML += `<div style="margin-bottom:8px;"><strong>NGãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™</strong><br>æ¤œçŸ¥: ${hitNgWords.join(', ')}</div>`;
                    }
                    if (hasMyNum) {
                         msgHTML += `<div><strong>ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ç­‰ã®å¯èƒ½æ€§ã‚ã‚Š</strong><br>12æ¡ã®æ•°å­—ãªã©ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚å…¥åŠ›ã«ã¯ååˆ†æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</div>`;
                    }
                    
                    warningMsg.innerHTML = msgHTML;
                } else {
                    warningBox.style.display = 'none';
                    warningMsg.innerHTML = '';
                }
            },

            clearInput: function() {
                document.getElementById('user-input').value = '';
                document.getElementById('result-area').style.display = 'none';
                document.getElementById('warning-box').style.display = 'none';
                document.getElementById('char-count').innerText = '0æ–‡å­—';
            },

            generate: function() {
                const input = document.getElementById('user-input').value;
                if (!input.trim()) {
                    this.showToast('ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }
                let prompt = '';
                const scene = this.currentScene;

                if (scene === 'A') { // ç›¸è«‡ãƒ¡ãƒ¢æ•´ç†
                    prompt = `ä»¥ä¸‹ã¯ã€ç¨ç†å£«ã¨é¡§å•å…ˆã¨ã®ç›¸è«‡ãƒ»æ‰“ã¡åˆã‚ã›ãƒ¡ãƒ¢ã§ã™ã€‚
ã“ã®å†…å®¹ã‚’ä¼šè¨ˆäº‹å‹™æ‰€ã®æ‰€å†…è¨˜éŒ²ã¨ã—ã¦æ•´ç†ã—ã¦ãã ã•ã„ã€‚

ã€å‡ºåŠ›é …ç›®ã€‘
1 ç›¸è«‡ã®æ¦‚è¦ï¼ˆäº‹å®Ÿé–¢ä¿‚ï¼‰
2 é¡§å®¢ã®è¦æœ›ãƒ»æ„å‘
3 ç¨å‹™ä¸Šã®è«–ç‚¹ãƒ»ãƒªã‚¹ã‚¯ï¼ˆæ¤œè¨ã™ã¹ãæ³•çš„æ ¹æ‹ å«ã‚€ï¼‰
4 ä»Šå¾Œã®å¯¾å¿œãƒ»ã‚¿ã‚¹ã‚¯ï¼ˆèª°ãŒã€ã„ã¤ã¾ã§ã«ã€ä½•ã‚’ã™ã‚‹ã‹ï¼‰

ã€æ¡ä»¶ã€‘
ãƒ»ä¸»è¦³çš„ãªæ„Ÿæƒ³ã¯é™¤ãã€äº‹å®Ÿã¨è«–ç‚¹ã‚’æ˜ç¢ºã«åˆ†ã‘ã¦ãã ã•ã„ã€‚
ãƒ»å¿…è¦ã«å¿œã˜ã¦ã€é–¢é€£ã—ãã†ãªç¨æ³•ï¼ˆæ³•äººç¨æ³•ã€æ‰€å¾—ç¨æ³•ã€æ¶ˆè²»ç¨æ³•ãªã©ï¼‰ã‚’æ¨æ¸¬ã—ã¦ãƒ¡ãƒ¢ã«æ®‹ã—ã¦ãã ã•ã„ã€‚

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                } 
                else if (scene === 'B') { // ç¨å‹™å›ç­”ãƒ»æ„è¦‹æ§‹æˆ
                    const type = document.getElementById('select-B').value;
                    const typeInstruction = type === 'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå›ç­”' 
                        ? 'ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆçµŒå–¶è€…ï¼‰å‘ã‘ã®ãƒ¡ãƒ¼ãƒ«ã‚„ãƒãƒ£ãƒƒãƒˆã§ã®å›ç­”æ¡ˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚å°‚é–€ç”¨èªã¯å™›ã¿ç •ãã€çµè«–â†’ç†ç”±â†’è£œè¶³ã®é †ã§åˆ†ã‹ã‚Šã‚„ã™ãè¨˜è¿°ã—ã¦ãã ã•ã„ã€‚' 
                        : 'æ‰€å†…ã§ã®æ±ºè£ã‚„æ¤œè¨ã«ä½¿ã†ãŸã‚ã®å°‚é–€çš„ãªãƒ¡ãƒ¢ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚æ ¹æ‹ æ¡æ–‡ã‚„é€šé”ç•ªå·ã‚’æ˜è¨˜ã—ã€å¦èªãƒªã‚¹ã‚¯ã«ã¤ã„ã¦ã‚‚è¨€åŠã—ã¦ãã ã•ã„ã€‚';
                    
                    prompt = `ä»¥ä¸‹ã®è³ªå•äº‹é …ãŠã‚ˆã³äº‹å®Ÿé–¢ä¿‚ã«åŸºã¥ãã€ç¨ç†å£«ã¨ã—ã¦ã®${type}ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã€å‡ºåŠ›æ§‹æˆæ¡ˆã€‘
1 çµè«–ï¼ˆYes/No/æ¡ä»¶ä»˜ãYesãªã©ï¼‰
2 ç†ç”±ãƒ»æ ¹æ‹ ï¼ˆç¨æ³•ã€é€šé”ã€éå»ã®è£æ±ºä¾‹ãªã©ï¼‰
3 ç•™æ„ç‚¹ãƒ»ãƒªã‚¹ã‚¯ï¼ˆç¨å‹™èª¿æŸ»ã§æŒ‡æ‘˜ã•ã‚Œã†ã‚‹ãƒã‚¤ãƒ³ãƒˆï¼‰
4 ï¼ˆå¿…è¦ã§ã‚ã‚Œã°ï¼‰è¨ˆç®—ã‚„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æ¦‚ç®—

ã€æ¡ä»¶ã€‘
ãƒ»${typeInstruction}

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                } 
                else if (scene === 'C') { // åˆ¶åº¦è§£èª¬
                    const depth = document.getElementById('select-C').value;
                    let depthInstruction = '';
                    if (depth === 'ä¸€è¨€ã§') depthInstruction = 'å¿™ã—ã„çµŒå–¶è€…ãŒãƒãƒ£ãƒƒãƒˆã§ãƒ‘ãƒƒã¨è¦‹ã¦ç†è§£ã§ãã‚‹ã‚ˆã†ã€200æ–‡å­—ä»¥å†…ã§æ ¸å¿ƒã®ã¿ã‚’ä¼ãˆã¦ãã ã•ã„ã€‚';
                    else if (depth === 'æ¨™æº–') depthInstruction = 'ãƒ¡ãƒ¼ãƒ«æœ¬æ–‡ã¨ã—ã¦ãã®ã¾ã¾é€ã‚Œã‚‹ã‚ˆã†ã€æŒ¨æ‹¶ã‚’å«ã‚ã¦400ã€œ600æ–‡å­—ç¨‹åº¦ã§ä¸å¯§ã«è§£èª¬ã—ã¦ãã ã•ã„ã€‚';
                    else depthInstruction = 'å…·ä½“çš„ãªè¨ˆç®—ä¾‹ã‚„ã€ã€ŒãŸã¨ãˆã°ã€œã®å ´åˆã€ã¨ã„ã£ãŸå…·ä½“ä¾‹ã‚’äº¤ãˆã€èª¤è§£ãŒãªã„ã‚ˆã†ã«800æ–‡å­—ä»¥ä¸Šã§è©³ç´°ã«è§£èª¬ã—ã¦ãã ã•ã„ã€‚';
                    
                    prompt = `ä»¥ä¸‹ã®ç¨å‹™ãƒ»ä¼šè¨ˆãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦ã€å°‚é–€çŸ¥è­˜ã®ãªã„é¡§å•å…ˆï¼ˆçµŒå–¶è€…ã‚„çµŒç†æ‹…å½“è€…ï¼‰ã«èª¬æ˜ã™ã‚‹ãŸã‚ã®æ–‡ç« ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ã€æ¡ä»¶ã€‘
ãƒ»å°‚é–€ç”¨èªã¯ã§ãã‚‹ã ã‘å¹³æ˜“ãªè¨€è‘‰ã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼ˆä¾‹ï¼šæé‡‘ç®—å…¥â†’çµŒè²»ã«ãªã‚‹ï¼‰ã€‚
ãƒ»${depthInstruction}
ãƒ»ç›¸æ‰‹ãŒæã‚’ã—ãªã„ãŸã‚ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚‚ä¸€è¨€æ·»ãˆã¦ãã ã•ã„ã€‚

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                } 
                else if (scene === 'D') { // åŒ¿ååŒ–
                    const level = document.getElementById('select-D').value;
                    let levelInstruction = '';
                    if (level === 'ä½') levelInstruction = 'å›ºæœ‰åè©ï¼ˆä¼šç¤¾åã€ä»£è¡¨è€…åï¼‰ã®ã¿ã‚’ä¸€èˆ¬åè©ï¼ˆAç¤¾ã€Bæ°ãªã©ï¼‰ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚';
                    else if (level === 'ä¸­') levelInstruction = 'ä¼šç¤¾åãƒ»äººåã«åŠ ãˆã€å…·ä½“çš„ãªåœ°åã€æ—¥æ™‚ã€å…·ä½“çš„ãªé‡‘é¡ï¼ˆæ¦‚æ•°ã«ã™ã‚‹ï¼‰ã‚‚ä¸€èˆ¬åŒ–ã—ã¦ãã ã•ã„ã€‚';
                    else levelInstruction = 'ä¼šç¤¾åãƒ»äººåãƒ»åœ°åãƒ»æ—¥æ™‚ãƒ»é‡‘é¡ã«åŠ ãˆã€æ¥­ç¨®ã‚„å–å¼•å…ˆã®ç‰¹å¾´ãªã©ã€å€‹ç¤¾ãŒç‰¹å®šã•ã‚Œã†ã‚‹èƒŒæ™¯æƒ…å ±ã‚‚ã™ã¹ã¦æŠ½è±¡åŒ–ã—ã¦ãã ã•ã„ã€‚';
                    
                    prompt = `ä»¥ä¸‹ã®ç¨å‹™äº‹ä¾‹ãƒ»ç›¸è«‡å†…å®¹ã«å«ã¾ã‚Œã‚‹å›ºæœ‰æƒ…å ±ã‚’ã€äº‹ä¾‹å…±æœ‰ç”¨ï¼ˆã¾ãŸã¯ç ”ä¿®ç”¨ï¼‰ã«åŒ¿ååŒ–ã—ã¦ãã ã•ã„ã€‚

ã€å‡ºåŠ›ã€‘
1 åŒ¿ååŒ–å¾Œã®æ–‡ç« 
2 ç½®æ›å¯¾å¿œè¡¨ï¼ˆå…ƒã®åç§° â†’ ç½®æ›å¾Œï¼‰

ã€æ¡ä»¶ã€‘
ãƒ»${levelInstruction}
ãƒ»æ–‡è„ˆãŒé€šã‚‹ã‚ˆã†ã«è‡ªç„¶ã«æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                }

                document.getElementById('result-text').textContent = prompt;
                document.getElementById('result-area').style.display = 'block';
                setTimeout(() => { document.getElementById('result-area').scrollIntoView({ behavior: 'smooth' }); }, 100);
                
                const copyBtn = document.getElementById('copy-btn');
                if(copyBtn) {
                    copyBtn.textContent = 'ã‚³ãƒ”ãƒ¼ã™ã‚‹';
                    copyBtn.classList.remove('btn-primary');
                    copyBtn.classList.add('btn-secondary');
                }
            },

            copyResult: function() {
                const text = document.getElementById('result-text').textContent;
                this.performCopy(text);
            },
            
            copyText: function(buttonElement) {
                const text = buttonElement.previousElementSibling.textContent;
                this.performCopy(text, buttonElement);
            },

            performCopy: function(text, btnElement = null) {
                if (!text) return;
                
                const onCopySuccess = () => {
                    this.showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
                    
                    const targetBtn = btnElement || document.getElementById('copy-btn');
                    if (targetBtn) {
                        const originalText = targetBtn.textContent;
                        targetBtn.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸâœ¨';
                        setTimeout(() => {
                            targetBtn.textContent = originalText;
                        }, 2000);
                    }
                };

                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(onCopySuccess).catch(err => {
                        this.fallbackCopy(text);
                    });
                } else {
                    this.fallbackCopy(text);
                }
            },
            
            fallbackCopy: function(text) {
                try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    this.showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
                } catch (err) {
                    this.showToast('ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸ');
                }
            },

            showToast: function(message) {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.className = 'show';
                setTimeout(() => { toast.className = toast.className.replace('show', ''); }, 3000);
            }
        };

        app.init();
    </script>
</body>
</html>